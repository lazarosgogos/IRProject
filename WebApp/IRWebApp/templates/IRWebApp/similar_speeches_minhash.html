<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Similar Speeches based on minhash</title>
</head>

<body>
    <a href="/"><h2>Back home</h2></a>
    <a href="/similar_speeches_minhash/"><h1>Find similar speech</h1></a>
    <h5>The following similarities are pre-calculated, with a threshold of 85% similarity and
        204 random permutations. Hence, the bucket size is 12 and the row size is 17.
    </h5>
    <form method="post" action="{% url 'similar_speeches_minhash' %}">
        {% csrf_token %}
        <input type="number" name="requested_speech_id" placeholder="Enter speech ID" required>
        <button type="submit">Search</button>
    </form>
    <!-- Uncomment the code below to unveil the Create M-Tree button
         in case you want to recreate the M-Tree from scratch. -->
    <!-- <h1>Create Tree</h1>
    <form method="post" action="{% url 'similar_speeches_minhash' %}">
        {% csrf_token %}
        <input type="hidden" name="create_minhash">
        <button type="submit">Create Minhash key:value pairs</button>
    </form> -->
    
    {% if empty == True%}
        <h1>No similar speeches found</h1>
    {% elif data %}
    <h1>Similar Speeches based on minhash</h1>
    <table>
        <thead>
            <tr>
                <th>Member name</th>
                <th>Speech</th>
            </tr>
        </thead>
        <tbody>
            {% for item in data %}
            <tr>
                <td>{{ item.member_name }}</td>
                <td>{{ item.speech }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <!-- <table>
        <tr>
            <th>Result</th>
        </tr>
        {% for result in results %}
        <tr>
            <td>{{ result.member_name }}</td>
            <td>{{ result.political_party }}</td>
            <td>{{ result.speech }}</td>
        </tr>
        {% endfor %}
    </table> -->
    {% endif %}
    <h2>Available indices for looking up</h2>
    <p>{% for speechID in d_keys %}
        {{ speechID }},
    {% endfor %}
    </p>

</body>

</html>